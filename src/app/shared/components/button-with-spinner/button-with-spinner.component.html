<button
  *ngIf="!(isLoading$ | async); else embeddedSpinner"
  (click)="onClick()"
  mat-flat-button
  [color]="color"
  [disabled]="isDisabled"
>
  <ng-content />
</button>

<ng-template #embeddedSpinner>
  <button mat-flat-button [color]="color" disabled>
    <mat-icon>
      <mat-spinner diameter="19" />
    </mat-icon>
  </button>
</ng-template>
